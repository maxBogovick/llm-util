{
  "preset": {
    "id": "{{ ctx.preset.id }}",
    "name": "{{ ctx.preset.name }}",
    "description": "{{ ctx.preset.description }}",
    "suggested_model": "{{ ctx.preset.suggested_model }}",
    "max_tokens_hint": {{ ctx.preset.max_tokens_hint }},
    "temperature_hint": {{ ctx.preset.temperature_hint }},
    "system_prompt": {{ ctx.preset.system_prompt | json_encode() }},
    "user_prompt_template": {{ ctx.preset.user_prompt_template | json_encode() }}
  },
  "chunk_index": {{ ctx.chunk_index }},
  "total_chunks": {{ ctx.total_chunks }},
  "metadata": {
    "files_in_chunk": {{ ctx.chunk_files }},
    "total_tokens": {{ ctx.total_tokens }},
    "generated_at": "{{ ctx.metadata.generated_at }}",
    "format": "{{ ctx.metadata.format }}"
  },
  "files": [
    {% for file in ctx.files %}
    {
      "path": "{{ file.relative_path }}",
      "is_binary": {{ file.is_binary }},
      "token_count": {{ file.token_count }},
      {% if file.lines %}"lines": {{ file.lines }},{% endif %}
      {% if not file.is_binary %}"content": {{ file.content | json_encode() }}{% else %}"content": null{% endif %}
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  ],
  "instructions": "Based on the '{{ ctx.preset.name }}' preset, please analyze the provided codebase and deliver results according to the specified system prompt and user prompt template above. This is part {{ ctx.chunk_index }} of {{ ctx.total_chunks }} total chunks."
}